# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/regulator/mediatek,mt6358-regulator.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: MediaTek MT6358 Regulator

maintainers:
  - Zhiyong Tao <zhiyong.tao@mediatek.com>

description:
  Regulator node of the PMIC. This node should under the PMIC's device node.
  All voltage regulators provided by the PMIC are described as sub-nodes of
  this node.

properties:
  compatible:
    const: mediatek,mt6358-regulator

  ldo_vxo22:
    description: LDOs with fixed 2.2V output and 0~100/10mV tuning
    type: object
    $ref: regulator.yaml#
    properties:
      regulator-allowed-modes: false
    unevaluatedProperties: false

  ldo_vusb:
    description: LDOs with fixed 3.0V output and 0~100/10mV tuning
    type: object
    $ref: regulator.yaml#
    properties:
      regulator-allowed-modes: false
    unevaluatedProperties: false

  vsys-ldo1-supply:
    description: Supply for LDOs vfe28, vxo22, vcn28, vaux18, vaud28, vsim1, vusb, vbif28
  vsys-ldo2-supply:
    description: Supply for LDOs vldo28, vio28, vmc, vmch, vsim2
  vsys-ldo3-supply:
    description: Supply for LDOs vcn33, vcama1, vcama2, vemc, vibr
  vsys-vcore-supply:
    description: Supply for buck regulator vcore
  vsys-vdram1-supply:
    description: Supply for buck regulator vdram1
  vsys-vgpu-supply:
    description: Supply for buck regulator vgpu
  vsys-vmodem-supply:
    description: Supply for buck regulator vmodem
  vsys-vpa-supply:
    description: Supply for buck regulator vpa
  vsys-vproc11-supply:
    description: Supply for buck regulator vproc11
  vsys-vproc12-supply:
    description: Supply for buck regulator vproc12
  vsys-vs1-supply:
    description: Supply for buck regulator vs1
  vsys-vs2-supply:
    description: Supply for buck regulator vs2
  vs1-ldo1-supply:
    description: Supply for LDOs vrf18, vefuse, vcn18, vcamio, vio18
  vs2-ldo1-supply:
    description: Supply for LDOs vdram2
  vs2-ldo2-supply:
    description: Supply for LDOs vrf12, va12
  vs2-ldo3-supply:
    description: Supply for LDOs vsram-gpu, vsram-others, vsram-proc11, vsram-proc12
  vs2-ldo4-supply:
    description: Supply for LDO vcamd

patternProperties:
  "^buck_v(core|dram1|gpu|modem|pa|proc1[12]|s[12])$":
    description: Buck regulators
    type: object
    $ref: regulator.yaml#
    properties:
      regulator-allowed-modes:
        description: |
          Buck regulatpr operating modes allowed. Valid values below.
          Users should use the macros from dt-bindings/regulator/mediatek,mt6397-regulator.h
            0 (MT6397_BUCK_MODE_AUTO): Auto PFM/PWM mode
            1 (MT6397_BUCK_MODE_FORCE_PWM): Forced PWM mode
        items:
          enum: [0, 1]
    unevaluatedProperties: false

  "^ldo_v(a|rf)12$":
    description: LDOs with fixed 1.2V output and 0~100/10mV tuning
    type: object
    $ref: regulator.yaml#
    properties:
      regulator-allowed-modes: false
    unevaluatedProperties: false

  "^ldo_v((aux|cn|io|rf)18|camio)$":
    description: LDOs with fixed 1.8V output and 0~100/10mV tuning
    type: object
    $ref: regulator.yaml#
    properties:
      regulator-allowed-modes: false
    unevaluatedProperties: false

  "^ldo_v(aud|bif|cn|fe|io)28$":
    description: LDOs with fixed 2.8V output and 0~100/10mV tuning
    type: object
    $ref: regulator.yaml#
    properties:
      regulator-allowed-modes: false
    unevaluatedProperties: false

  "^ldo_vsram_(gpu|others|proc1[12])$":
    description: LDOs with variable output
    type: object
    $ref: regulator.yaml#
    properties:
      regulator-allowed-modes: false
    unevaluatedProperties: false

  "^ldo_v(cama[12]|camd|cn33|dram2|efuse|emc|ibr|ldo28|mc|mch|sim[12])$":
    description: LDOs with variable output and 0~100/10mV tuning
    type: object
    $ref: regulator.yaml#
    properties:
      regulator-allowed-modes: false
    unevaluatedProperties: false

required:
  - compatible

additionalProperties: false

examples:
  - |
    #include <dt-bindings/regulator/mediatek,mt6397-regulator.h>

    regulator {
        compatible = "mediatek,mt6358-regulator";

        buck_vgpu {
            regulator-name = "vgpu";
            regulator-min-microvolt = <625000>;
            regulator-max-microvolt = <900000>;
            regulator-ramp-delay = <6250>;
            regulator-enable-ramp-delay = <200>;
            regulator-allowed-modes = <MT6397_BUCK_MODE_AUTO
                                       MT6397_BUCK_MODE_FORCE_PWM>;
        };

        ldo_vsram_gpu {
            regulator-name = "vsram_gpu";
            regulator-min-microvolt = <850000>;
            regulator-max-microvolt = <1000000>;
            regulator-ramp-delay = <6250>;
            regulator-enable-ramp-delay = <240>;
        };
    };

...
