// SPDX-License-Identifier: GPL-2.0-only
/*
 * Copyright (c) 2022, Collabora Ltd
 * Author: AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>
 */

/dts-v1/;
#include "mt6795.dtsi"

/ {
	model = "Sony Xperia M5";
	compatible = "sony,xperia-m5", "mediatek,mt6795";
	chassis-type = "handset";

	aliases {
		mmc0 = &mmc0;
		mmc1 = &mmc1;
		serial0 = &uart0;
		serial1 = &uart1;
	};

	memory@40000000 {
		device_type = "memory";
		reg = <0 0x40000000 0 0x1e800000>;
	};

	reserved_memory: reserved-memory {
		#address-cells = <2>;
		#size-cells = <2>;
		ranges;

		/* 128 KiB reserved for ARM Trusted Firmware (BL31) */
		bl31_secmon_reserved: secmon@43000000 {
			reg = <0 0x43000000 0 0x30000>;
			no-map;
		};

		/* preloader and bootloader regions cannot be touched */
		preloader-region@44800000 {
			reg = <0 0x44800000 0 0x100000>;
			no-map;
		};

		bootloader-region@46000000 {
			reg = <0 0x46000000 0 0x400000>;
			no-map;
		};
	};
};

&fhctl {
	clocks = <&apmixedsys CLK_APMIXED_MAINPLL>, <&apmixedsys CLK_APMIXED_MPLL>,
		 <&apmixedsys CLK_APMIXED_MSDCPLL>;
	mediatek,hopping-ssc-percent = <8>, <5>, <8>;
	status = "okay";
};

&i2c0 {
	pinctrl-names = "default";
	pinctrl-0 = <&i2c0_pins>;
	status = "okay";
};

&i2c1 {
	pinctrl-names = "default";
	pinctrl-0 = <&i2c1_pins>;
	status = "okay";
};

&i2c2 {
	pinctrl-names = "default";
	pinctrl-0 = <&i2c2_pins>;
	status = "okay";
};

&i2c3 {
	pinctrl-names = "default";
	pinctrl-0 = <&i2c3_pins>;
	status = "okay";
};

&pio {
	i2c0_pins: i2c0-pins {
		pins-bus {
			pinmux = <PINMUX_GPIO45__FUNC_SDA0>,
				 <PINMUX_GPIO46__FUNC_SCL0>;
			input-enable;
		};
	};

	i2c1_pins: i2c1-pins {
		pins-bus {
			pinmux = <PINMUX_GPIO125__FUNC_SDA1>,
				 <PINMUX_GPIO126__FUNC_SCL1>;
			bias-disable;
		};
	};

	i2c2_pins: i2c2-pins {
		pins-bus {
			pinmux = <PINMUX_GPIO43__FUNC_SDA2>,
				 <PINMUX_GPIO44__FUNC_SCL2>;
			bias-disable;
		};
	};

	i2c3_pins: i2c3-pins {
		pins-bus {
			pinmux = <PINMUX_GPIO136__FUNC_SDA3>,
				 <PINMUX_GPIO137__FUNC_SCL3>;
			bias-disable;
		};
	};

	i2c4_pins: i2c4-pins {
		pins-bus {
			pinmux = <PINMUX_GPIO100__FUNC_SDA4>,
				 <PINMUX_GPIO101__FUNC_SCL4>;
			bias-disable;
		};
	};

	uart0_pins: uart0-pins {
		pins-rx {
			pinmux = <PINMUX_GPIO113__FUNC_URXD0>;
			bias-pull-up;
			input-enable;
		};
		pins-tx {
			pinmux = <PINMUX_GPIO114__FUNC_UTXD0>;
			output-high;
		};
	};

	uart2_pins: uart2-pins {
		pins-rx {
			pinmux = <PINMUX_GPIO31__FUNC_URXD2>;
			bias-pull-up;
			input-enable;
		};
		pins-tx {
			pinmux = <PINMUX_GPIO32__FUNC_UTXD2>;
		};
	};
};

&uart0 {
	status = "okay";

	pinctrl-names = "default";
	pinctrl-0 = <&uart0_pins>;
};

&uart2 {
	status = "okay";

	pinctrl-names = "default";
	pinctrl-0 = <&uart2_pins>;
};
